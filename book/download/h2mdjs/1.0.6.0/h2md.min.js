(function(){/*
 Copyright 2014-2016 AXELL Corporation.
 H2MD JavaScript Library
 version 1.0.6.0
*/
var e;
function p(){this.C=-1;this.a={};this.a.width=0;this.a.height=0;this.a.L=0;this.a.K=0;this.a.frames=0;this.a.La=0;this.a.Ga=0;this.a.I=0;this.a.X=1;this.a.O=1;this.H=this.g=this.a.w=0;this.$=[];this.Z=[];this.v=this.B=this.s=this.f=null;this.b=new aa;this.o=new ba;this.A=0;this.C=-1;this.G=this.m=null;this.Ea={};this.Da={};this.Fa={};this.c={};this.c.ia=null;this.c.ha=null;this.c.buffered=null;this.c.done=null;this.c.request=null;this.c.P=null;this.fa=!1;this.ea="";this.na=this.ma=!1;this.aa=this.ba=
this.da=this.ca=0;this.ka=null;this.l=this.oa=this.u=0;this.F=-1;this.i=0;this.T=[];this.R=this.S=this.U=this.D=0}var q=[];function t(a,b){var c=a.split("/"),c=c[c.length-1];q[c]=b;c=document.createElement("script");c.type="text/javascript";c.src=a;document.body.appendChild(c)}
function z(a){0!=a.l&&a.U-a.S>=a.l*a.a.I?(a.u=5,setTimeout(function(a){return function(){A(a)}}(a),500)):a.g>=a.a.O&&a.H>=a.a.X?(a.u=6,0==a.l&&(a.D=a.s.frame),A(a)):a.g<a.oa&&a.g<a.a.O?0==a.l?(a.u=4,D(a,a.g,!1)):(a.u=4,A(a)):(a.u=3,0==a.l&&(a.D=a.s.frame),a.U=a.s.frame,E(a))}function ca(a){a.B&&!a.v&&(a.v=a.B.getContext("2d"))}
function A(a){switch(a.u){case 0:a.u=1;E(a);break;case 1:a.u=2;var b;b={j:0};if(72!=N(a.b,b)||50!=N(a.b,b)||77!=N(a.b,b))b="invalid file";else{var c=O(a.b,b);if(2!=c&&3!=c&&4!=c)b="invalid version";else{a.a.version=c;a.a.J=O(a.b,b);a.a.w=O(a.b,b);a.a.frames=O(a.b,b);var d=O(a.b,b),f=O(a.b,b);a.a.I=1*d/f;a.a.width=O(a.b,b);a.a.height=O(a.b,b);a.a.X=O(a.b,b);a.a.O=O(a.b,b);a.a.La=O(a.b,b);a.a.Ga=O(a.b,b);4>c?(a.a.N=O(a.b,b),a.a.Ia=a.a.N,a.a.V=32):(b=O(a.b,b),a.a.N=1<<(b&255),a.a.Ia=1<<(b>>8&255),a.a.V=
1<<(b>>16&255));a.a.J=a.a.J;a.a.L=da(a.a.width,a.a.V);a.a.K=da(a.a.height,a.a.V);a.na||(a.ca=0,a.da=0,a.ba=a.a.width,a.aa=a.a.height);b=a.b;c=b.a;d=a.a.X*b.c;window.ArrayBuffer?b.a=new Uint8Array(d):b.a=Array(d);for(d=0;d<c.length;d++)b.a[d]=c[d];b=null}}if(b){P(a,b);break}a.f=ea(a);a.s=ea(a);a.D=0;a.U=0;b=a.o;c=a.b;d=a.l;b.a=a.a;b.c=c;b.B=d;a.H++;D(a,a.g,!1);break;case 2:a.T[a.g]=0;a.g++;a.c.ia&&a.c.ia();fa(a);z(a);0!=a.l&&(a.i=1,X(a));break;case 4:a.T[a.g]=a.U+1;a.g++;z(a);break;case 3:a.H++;fa(a);
z(a);break;case 5:z(a);break;case 6:a.c.buffered&&a.c.buffered()}}function ga(a){a.D=a.T[a.i];a.i==a.a.O-1&&(a.D=a.a.frames);a.i++;X(a)}function X(a){if(-1!=a.F){if(a.i>a.F||a.i+2<a.F)a.i=a.F;a.F=-1}var b=a.i>=a.g;b||(b=a.T[a.i]-a.S>=a.l*a.a.I);b?setTimeout(function(a){return function(){X(a)}}(a),500):D(a,a.i,!0)}function P(a,b){a.c.ha&&a.c.ha("H2MD : "+b)}
function E(a){if(!(a.H>=a.a.X)){var b=a.G+".s"+("00000000"+a.H).slice(-8),c=b+".b64",d=function(a){return function(b){ha(a.b,b);A(a)}}(a);if(a.c.request)a.c.request(c,d);else if(a.ma)t(b+".js",d);else{var f;window.XMLHttpRequest?f=new XMLHttpRequest:window.ActiveXObject?f=new ActiveXObject("Microsoft.XMLHTTP"):f=null;f.open("GET",c,!0);f.onreadystatechange=function(){4==f.readyState&&(200==f.status?(ha(a.b,f.responseText),A(a)):P(a,"syntax not found"))};f.onerror=function(){P(a,"syntax not found")};
f.send(null)}}}function ia(a,b,c){return a.c.request?b:b+c}function ja(a,b,c,d,f){b[c]=new Image;b[c].onload=f;b[c].onerror=function(){P(a,"i picture image not found")};b[c].src=d}
function D(a,b,c){if(!(b>=a.a.O)){var d=ia(a,a.G+".i"+("00000000"+b).slice(-8)+".jpg",a.ea),f=ia(a,a.G+".a"+("00000000"+b).slice(-8)+".png",a.ea),h=function(d){ja(a,a.Z,b,d,function(){a.o.o[b]=a.Z[b];a.Z[b]=null;c?ga(a):A(a)})},u=function(d){ja(a,a.$,b,d,function(){var d=a.o;d.b[b]=a.$[b];if(0==b&&!d.g){var k=d.a.N;d.l=d.b[b].width/k;d.u=d.b[b].height/k;d.g=document.createElement("canvas");d.g.width=d.b[b].width;d.g.height=d.b[b].height;d.s=d.g.getContext("2d");d.s.clearRect(0,0,d.g.width,d.g.height)}a.$[b]=
null;a.a.w&16?a.c.request?a.c.request(f,h):h(f):c?ga(a):A(a)})};a.c.request?a.c.request(d,u):u(d)}}e=p.prototype;e.va=function(a){this.c.ha=a};e.done=function(a){this.c.done=a};e.buffered=function(a){this.c.buffered=a};e.request=function(a){this.c.request=a};e.P=function(a){this.c.P=a};e.open=function(a,b){this.G?P(this,"new instance require"):(this.G=a,this.c.ia=b,A(this))};e.ta=function(a){a=document.getElementById(a);if(!a)return!1;this.B=a;this.v=null;this.la&&ca(this);return!0};
e.Ca=function(a,b,c,d){this.na=!0;this.ca=a;this.da=b;this.ba=c;this.aa=d};e.xa=function(a){if(void 0===a||-1>a)return!1;this.C=a;return!0};e.ya=function(){return la(this)};function la(a){if(a.m||-1>a.C||a.C>=a.a.frames||!a.B)return!1;requestAnimationFrame?(a.m=!0,a.R=(new Date).getTime(),requestAnimationFrame(function(){na(a)})):a.m=setInterval(function(){qa(a)},1E3/a.a.I);return!0}
function na(a){if(a.m){for(var b=(new Date).getTime(),c=1E3/a.a.I,d=Math.ceil(a.a.I/60);b-a.R>=c;)1<=d&&qa(a),a.R+=c,d--;requestAnimationFrame(function(){na(a)})}}e.ra=function(){return null!=this.m};e.Ba=function(a){if(void 0===a||0>a||a>=this.a.frames)return!1;this.A=a;return!0};e.Y=function(){this.ja();this.A=0};e.ja=function(){this.m&&("number"===typeof this.m&&clearInterval(this.m),this.m=null)};e.Aa=function(a){this.fa=a};
e.wa=function(){if(0==this.a.frames)return null;var a={};a.width=this.a.width;a.height=this.a.height;a.fps=this.a.I;a.frames=this.a.frames;a.version=this.a.version;return a};e.za=function(){if(0==this.a.frames)return null;var a={};a.frames=this.a.frames;a.current_frame=this.S;a.buffered_frame=this.D;return a};e.Ha=function(a){this.ka=a};e.ua=function(a){return this.ga(a,0,0,this.a.width,this.a.height,0,0,this.a.width,this.a.height)};
e.ga=function(a,b,c,d,f,h,u,v,m){if(void 0===a||0>a||a>=this.a.frames)return null;try{this.S=a;var k=a-(this.f.frame-1);if(!(0<=k&&k<=this.f.M)&&1!=k){var l=0,g=this.Fa;g.h=0;for(g.j=this.a.J;;){var w=g.j,y=Y(this,g);if(a<l+y.frames){this.f.frame=l;this.f.M=0;this.f.j=w;this.f.h=g.h;break}g.j=w+y.sa;g.h=g.h+y.W;l+=y.frames}k=a-(this.f.frame-1)}for(l=0;l<k;l++){var ka=this.f.frame%2,ya=(this.f.frame+1)%2,x=sa(this.f),C=this.f.M;0==C&&(C=Y(this,x).frames);if(!this.la){var r=this.o,ma=this.B;r.f=Array(3);
r.i=Array(3);r.m=0;"undefined"!=typeof H2MD_WebGL&&H2MD_WebGL.initialize(r.a.L,r.a.K,ma)&&(r.m=1);for(g=0;3>g;g++)if(r.a.w&16||2!=g)if(r.m)r.f[g]={},r.f[g].id=g,r.i[g]=0==g?new H2MD_WebGL(r.a.L,r.a.K,ma):r.i[0];else{var F=r.a.L,G=r.a.K;262144>F*G&&(512>F&&(F=512),512>G&&(G=512));r.f[g]=document.createElement("canvas");r.f[g].width=F;r.f[g].height=G;r.i[g]=r.f[g].getContext("2d")}var Q=navigator.userAgent;r.F=-1!=Q.search(/iPhone/)||-1!=Q.search(/iPad/)||-1!=Q.search(/iPod/);ca(this);this.la=!0}var n=
this.o,za=x.j,R=ta(n,x);n.A=n.F||n.m?!0:1==R.qa;var B=n.i[ka],oa=n.i[2];n.m&&B.setFrameBuffer(ka);if(n.a.w&16||n.m)B.clearRect(0,0,n.a.L,n.a.K),n.A||oa.clearRect(0,0,n.a.L,n.a.K);var w=g=0,S=n.a.V;n.D=3<=n.a.version&&n.a.w&16;for(y=0;y<n.a.K;y+=S)for(var H=0;H<n.a.L;H+=S){0==g?(w=N(n.c,x),g=w%8,w>>=3):g--;if(0>w||32<=w)throw"cu_type broken "+w;Z(n,0,w,H,y,x,B,oa,S,ya,R.qa)}n.a.w&16&&!n.A&&(B.globalCompositeOperation="destination-in",B.drawImage(n.f[2],0,0),B.globalCompositeOperation="source-over");
var T=x.j-za,pa=R.pa;if(4<=T-pa)throw"frame data overflow";for(;T<pa;)x.j++,T++;var g=n,U=Math.floor(x.h/n.l/n.u);if(U-1>g.v&&0!=g.B){for(var I=g.v;I<U;I++)g.b[I]=null,g.o[I]=null;g.v=U-1}C--;0==C&&ua(this,x);var J=this.f;J.M=C;J.j=x.j;J.h=x.h;J.frame++}this.ra()&&this.a.w&16&&this.v&&this.v.clearRect(0,0,this.B.width,this.B.height);var ra;var K=this.o;a=a%2;var V=this.ka,L=this.v,M;K.m?(K.i[a].setFrameBuffer(a),M=K.i[a].composite(b,c,d,f,h,u,v,m,V)):M=K.f[a];null!=L&&(V&&(L.globalCompositeOperation=
V),L.drawImage(M,b,c,d,f,h,u,v,m),L.globalCompositeOperation="source-over");ra=M;return ra}catch(W){if("reload"==W)return this.F=this.o.G,null;if("loading"==W)return null;this.Y();P(this,W)}};e.Ka=function(a){this.ea=a?"?"+(new Date).getTime():""};e.Ja=function(a){this.ma=a};e.Ma=function(a){this.l=a?60:0};window.H2MD=p;p.prototype.open=p.prototype.open;p.prototype.play=p.prototype.ya;p.prototype.seek=p.prototype.Ba;p.prototype.playing=p.prototype.ra;p.prototype.stop=p.prototype.Y;
p.prototype.pause=p.prototype.ja;p.prototype.error=p.prototype.va;p.prototype.done=p.prototype.done;p.prototype.buffered=p.prototype.buffered;p.prototype.info=p.prototype.wa;p.prototype.position=p.prototype.za;p.prototype.decode=p.prototype.ua;p.prototype.canvas=p.prototype.ta;p.prototype.stretch=p.prototype.Ca;p.prototype.loop=p.prototype.xa;p.prototype.nonce_url=p.prototype.Ka;p.prototype.jsonp=p.prototype.Ja;p.prototype.streaming=p.prototype.Ma;p.prototype.timeupdate=p.prototype.P;
p.prototype.request=p.prototype.request;p.prototype.composite=p.prototype.ga;p.prototype.composite_operation=p.prototype.Ha;p.prototype.profile=p.prototype.Aa;p.jsonpRequest=t;p.jsonpCallback=function(a){for(key in a)q[key](a[key])};function da(a,b){return Math.floor((a+b-1)/b)*b}function ea(a){var b={frame:0,h:0,M:0};b.j=a.a.J;return b}
function qa(a){if(a.fa){var b=[];b.push((new Date).getTime())}a.ga(a.A,0,0,a.a.width,a.a.height,a.ca,a.da,a.ba,a.aa)&&(a.A++,a.A>=a.a.frames&&(-1!=a.C?a.A=a.C:(a.A=0,a.Y(),a.c.done&&a.c.done())),a.fa&&(b.push((new Date).getTime()),b=""+(""+(b[1]-b[0])+"[msec]"),a.v.fillStyle="white",a.v.fillText(b,2,10)),a.c.P&&a.c.P())}function Y(a,b){var c=N(a.b,b),d=N(a.b,b);N(a.b,b);if(71!=c||72!=d)throw"gop header broken";c=a.Da;c.frames=O(a.b,b);c.sa=O(a.b,b);c.W=O(a.b,b);return c}
function ua(a,b){var c=N(a.b,b),d=N(a.b,b);N(a.b,b);if(71!=c||84!=d)throw"gop tailer broken";c=a.Ea;c.frames=O(a.b,b);c.sa=O(a.b,b);c.W=O(a.b,b)}function sa(a){var b={};b.j=a.j;b.h=a.h;return b}function fa(a){for(;a.s.frame<a.a.frames;)try{var b=sa(a.s),c=a.s.M;0==c&&(c=Y(a,b).frames);var d=b,f=ta(a.o,d);d.h+=f.W;d.j+=f.pa-f.J;c--;0==c&&ua(a,b);var h=a.s,d=b;h.M=c;h.j=d.j;h.h=d.h;h.frame++}catch(u){break}b=a.o;a.oa=Math.floor((a.s.h+b.l*b.u-1)/b.l/b.u)}function aa(){this.a=null;this.c=this.b=0}
function ha(a,b){var c=window.atob(b),d=c.length;null==a.a&&(a.a=Array(d),a.c=d);var f=a.b;if(a.a.length<f+d)throw"invalid syntax data size";for(var h=0;h<d;h++)a.a[f+h]=c.charCodeAt(h);a.b+=d}function N(a,b){if(b.j>=a.b)throw"loading";var c=a.a[b.j];b.j++;return c}function O(a,b){var c=N(a,b),c=c<<8|N(a,b);return c=c<<8|N(a,b)}
function ba(){this.C=this.s=this.g=this.i=this.f=null;this.A=!0;this.D=this.F=!1;this.c=this.a=null;this.b=[];this.o=[];this.u=this.l=0;this.v=-1;this.G=this.B=0;this.H={}}function va(a,b){var c=!0;a.b[b]&&a.b[b].complete||(c=!1);a.a.w&16&&(a.o[b]&&a.o[b].complete||(c=!1));if(!c){if(0!=a.B)throw a.G=b,b<a.v&&(a.v=b-1),"reload";throw"loading";}}
function ta(a,b){var c=N(a.c,b);if(70!=c)throw"frame header broken "+c;c=a.H;c.qa=N(a.c,b);c.Na=N(a.c,b);c.J=O(a.c,b);c.pa=O(a.c,b);c.W=O(a.c,b);for(var d=12;d<c.J;d+=3)O(a.c,b);return c}
function wa(a,b,c,d,f,h,u){var v=h.h%a.l,m=h.h/a.l|0,k=a.a.N,l=Math.floor(m/a.u),m=m%a.u*k,g=k*u;if(a.A){if(a.C!=l){va(a,l);a.C=-1;if(!a.m||a.a.w&16)a.s.drawImage(a.b[l],0,0),a.a.w&16&&(a.s.globalCompositeOperation="destination-in",a.s.drawImage(a.o[l],0,0),a.s.globalCompositeOperation="source-over");a.m&&(a.g.id=2,a.a.w&16?b.setTexture(a.g):b.setTexture(a.b[l]));a.C=l}b.drawImage(a.g,v*k,m,g,k,d,f,g,k)}else va(a,l),b.drawImage(a.b[l],v*k,m,g,k,d,f,g,k),a.a.w&16&&c.drawImage(a.o[l],v*k,m,g,k,d,f,
g,k);h.h+=u}function xa(a,b,c){b=b-3;3<=Math.abs(b)&&(a=N(a.c,c),0>b?b-=a:b+=a);return b}
function Z(a,b,c,d,f,h,u,v,m,k,l){if(c&1)m>>=1,c>>=1<<2*b,Z(a,b+1,c,d,f,h,u,v,m,k,l),Z(a,b+1,c>>1,d+1*m,f,h,u,v,m,k,l),Z(a,b+1,c>>2,d,f+1*m,h,u,v,m,k,l),Z(a,b+1,c>>3,d+1*m,f+1*m,h,u,v,m,k,l);else{c=1;b=0;if(1==l||a.D)b=N(a.c,h),c=b>>6;switch(c){case 1:k=a.a.N;for(l=0;l<m;l+=k)if(h.h%a.l*k+m<=a.l*k)wa(a,u,v,d,f+l,h,m/k);else for(b=0;b<m;b+=k)wa(a,u,v,d+b,f+l,h,1);break;case 0:v=xa(a,b>>3&7,h);h=xa(a,b&7,h);u.drawImage(a.f[k],d+v,f+h,m,m,d,f,m,m);break;case 2:if(!a.D)throw"unsupport fill type version";
break;default:throw"cu_type broken "+c;}}};})();
